package main

import (
	"fmt"
	"os"
)

// HelpText 包含详细的文件操作说明
const HelpText = `
文件加密/解密工具使用说明
========================

一、基本功能
-----------
本工具支持对文件和目录进行加密和解密操作，采用多种加密算法保护您的数据安全。

主要特性：
- ✅ 支持AES-256、Blowfish和XOR三种加密算法
- ✅ 目录级加密/解密，支持递归处理子目录
- ✅ 安全的密钥管理（PBKDF2密钥派生 + 随机盐值，加密时生成并保存至映射表，解密时从映射表读取）
- ✅ 文件完整性验证（MD5校验）
- ✅ 原子性文件操作，确保数据安全
- ✅ 流式处理，支持大文件操作
- ✅ 跨平台支持（Windows、Linux、macOS、Android）
- ✅ 详细的日志记录和错误处理
- ✅ Web管理界面，提供图形化操作体验
- ✅ RESTful API接口，支持程序化调用
- ✅ 实时进度跟踪，准确显示操作进度

二、支持的加密算法
----------------
1. AES (推荐)
   - 安全性：最高（军事级别的加密标准）
   - 适用于敏感个人数据、财务信息、商业机密等高安全性要求场景

2. Blowfish
   - 安全性：较高（经过广泛验证的加密算法）
   - 适用于中等敏感数据加密，性能较好的场景

3. XOR
   - 安全性：较低（基础保护）
   - 适用于大量非敏感数据的快速加密场景

三、配置文件说明
---------------
配置文件：encrypt_config.yaml

主要配置项：
- password: 加密密码（至少12位，包含大小写字母、数字和特殊字符）
- encrypt_type: 加密算法（aes/blowfish/xor）
- target_paths: 目标路径列表
- obfuscate_suffix: 混淆文件名后缀（默认.dat）
- obfuscate_name_length: 混淆文件名长度（默认12）
- map_filename: 映射文件名（默认.app_encrypt）
- lock_filename: 锁文件名（默认.encrypt.lock）
- map_storage_path: 映射文件存储路径
- salt: 盐值（可选，用于密钥派生）

四、使用方法
-----------
1. 首次使用：
   - 运行程序会自动生成默认配置文件 encrypt_config.yaml
   - 编辑配置文件，修改密码等参数

2. 加密操作：
   - 使用命令行参数：./encrypt -encrypt
   - 设置 password 和 encrypt_type
   - 设置 target_paths 为目标目录或文件
   - 运行程序开始加密

3. 解密操作：
   - 使用命令行参数：./encrypt -decrypt
   - 保持 password 和 encrypt_type 与加密时完全一致
   - 设置 target_paths 为加密时的目录
   - 运行程序开始解密

4. 启动Web管理界面：
   - 使用命令行参数：./encrypt -webui
   - 默认监听端口为9394
   - 通过浏览器访问 http://localhost:9394 使用图形化界面

5. 查看帮助信息：
   - 使用命令行参数：./encrypt -h 或 ./encrypt --help
   - 显示详细的使用说明和配置参数说明

五、命令行参数详解
---------------
- -h, --help：显示帮助信息
- -encrypt：执行加密操作
- -decrypt：执行解密操作
- -webui：启动Web管理界面

六、Web管理界面功能
----------------
1. 系统状态监控：实时显示应用运行状态、加密算法和目标路径数
2. 配置管理：可视化配置文件编辑，支持密码明文查看功能
3. 操作控制：一键启动加密/解密操作，支持停止操作
4. 进度跟踪：实时显示操作进度条，准确反映当前处理进度
5. 日志查看：实时滚动显示操作日志，支持自动滚动和手动查看
6. 映射表查看：查看已加密文件的映射关系，按配置路径分别显示各自路径的对象文件，包含原始路径、加密路径、文件大小、修改时间、MD5校验值和目标目录等完整信息

七、安全提示
-----------
1. 请务必记住您的密码！密码丢失将无法解密文件
2. 不要与他人共享配置文件，特别是包含密码的部分
3. 加密重要数据前，建议先在少量非关键数据上测试
4. 定期备份配置文件到安全位置
5. 在不同设备间传输加密文件时，请确保同时传输映射文件
6. 对于特别重要的文件，建议使用AES加密算法
7. 定期更换密码以提高安全性
8. 不要使用过于简单或常见的密码

八、注意事项
-----------
1. 加密和解密必须使用相同的配置参数
2. 程序会在目标目录创建.lock文件防止重复运行
3. 加密后的文件会保存映射关系到.map_storage_path指定的目录
4. 解密完成后会自动删除映射文件
5. 程序支持断点续传，意外中断后可重新运行继续处理
6. 使用WebUI时，可以通过进度条实时查看操作进度
7. WebUI支持实时日志流，可以监控操作过程中的详细信息
8. 在WebUI中进行操作时，可以通过停止按钮中断正在进行的操作
`

// ShowHelp 显示帮助信息并退出程序
func ShowHelp() {
	fmt.Print(HelpText)
	os.Exit(0)
}